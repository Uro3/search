var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function u(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function r(n,e,o){n.$$.on_destroy.push(function(n,...e){if(null==n)return t;const o=n.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}(e,o))}function s(t,n){t.appendChild(n)}function c(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function y(t,n){t.value=null==n?"":n}let g;function m(t){g=t}const b=[],v=[],w=[],k=[],_=Promise.resolve();let x=!1;function A(t){w.push(t)}let E=!1;const D=new Set;function T(){if(!E){E=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];m(n),K(n.$$)}for(m(null),b.length=0;v.length;)v.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];D.has(n)||(D.add(n),n())}w.length=0}while(b.length);for(;k.length;)k.pop()();x=!1,E=!1,D.clear()}}function K(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(A)}}const S=new Set;function M(t,n){t&&t.i&&(S.delete(t),t.i(n))}function j(t,n,e,o){if(t&&t.o){if(S.has(t))return;S.add(t),undefined.c.push((()=>{S.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function O(t,n){t.d(1),n.delete(t.key)}function R(t){t&&t.c()}function C(t,e,u,r){const{fragment:s,on_mount:c,on_destroy:l,after_update:a}=t.$$;s&&s.m(e,u),r||A((()=>{const e=c.map(n).filter(i);l?l.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(A)}function I(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function L(t,n){-1===t.$$.dirty[0]&&(b.push(t),x||(x=!0,_.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function N(n,i,u,r,s,c,a=[-1]){const f=g;m(n);const d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:i.context||[]),callbacks:e(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=u?u(n,i.props||{},((t,e,...o)=>{const i=o.length?o[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),p&&L(n,t)),e})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!r&&r(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();i.intro&&M(n.$$.fragment),C(n,i.target,i.anchor,i.customElement),T()}m(f)}class q{$destroy(){I(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const z=[];const B=function(n,e=t){let o;const i=[];function r(t){if(u(n,t)&&(n=t,o)){const t=!z.length;for(let t=0;t<i.length;t+=1){const e=i[t];e[1](),z.push(e,n)}if(t){for(let t=0;t<z.length;t+=2)z[t][0](z[t+1]);z.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(u,s=t){const c=[u,s];return i.push(c),1===i.length&&(o=e(r)||t),u(n),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}({totalResults:0,videos:[]});function P(n){let e,i,u,r,s;return{c(){e=a("input"),i=d(),u=a("button"),u.textContent="検索"},m(t,o){c(t,e,o),y(e,n[0]),c(t,i,o),c(t,u,o),r||(s=[p(e,"input",n[4]),p(u,"click",n[1])],r=!0)},p(t,[n]){1&n&&e.value!==t[0]&&y(e,t[0])},i:t,o:t,d(t){t&&l(e),t&&l(i),t&&l(u),r=!1,o(s)}}}function Z(t,n,e){var o=this&&this.__awaiter||function(t,n,e,o){return new(e||(e=Promise))((function(i,u){function r(t){try{c(o.next(t))}catch(t){u(t)}}function s(t){try{c(o.throw(t))}catch(t){u(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,s)}c((o=o.apply(t,n||[])).next())}))};let{endpoint:i}=n,{key:u}=n,r="";return t.$$set=t=>{"endpoint"in t&&e(2,i=t.endpoint),"key"in t&&e(3,u=t.key)},[r,()=>o(void 0,void 0,void 0,(function*(){const t=yield fetch(`${i}?q=${r}&key=${u}`),n=yield t.json();console.log("api response: ",n);const e={totalResults:n.pageInfo.totalResults,videos:n.items.map((t=>({id:t.id.videoId,title:t.snippet.title,channelTitle:t.snippet.channelTitle,publishTime:t.snippet.publishTime})))};B.update((()=>e))})),i,u,function(){r=this.value,e(0,r)}]}class U extends q{constructor(t){super(),N(this,t,Z,P,u,{endpoint:2,key:3})}}function V(t,n,e){const o=t.slice();return o[1]=n[e],o}function F(t,n){let e,o,i,u,r,p,y,g,m,b,v,w,k,_,x,A=n[1].title+"",E=n[1].channelTitle+"",D=n[1].publishTime+"";return{key:t,first:null,c(){e=a("li"),o=f(A),i=d(),u=a("ul"),r=a("li"),p=a("a"),y=f("play"),m=d(),b=a("li"),v=f(E),w=d(),k=a("li"),_=f(D),x=d(),h(p,"href",g="https://www.youtube.com/watch?v="+n[1].id),h(p,"target","_blank"),h(p,"rel","noopener noreferrer"),this.first=e},m(t,n){c(t,e,n),s(e,o),s(e,i),s(e,u),s(u,r),s(r,p),s(p,y),s(u,m),s(u,b),s(b,v),s(u,w),s(u,k),s(k,_),s(e,x)},p(t,e){n=t,1&e&&A!==(A=n[1].title+"")&&$(o,A),1&e&&g!==(g="https://www.youtube.com/watch?v="+n[1].id)&&h(p,"href",g),1&e&&E!==(E=n[1].channelTitle+"")&&$(v,E),1&e&&D!==(D=n[1].publishTime+"")&&$(_,D)},d(t){t&&l(e)}}}function G(n){let e,o=[],i=new Map,u=n[0];const r=t=>t[1].id;for(let t=0;t<u.length;t+=1){let e=V(n,u,t),s=r(e);i.set(s,o[t]=F(s,e))}return{c(){e=a("ul");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,n){c(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,[n]){1&n&&(u=t[0],o=function(t,n,e,o,i,u,r,s,c,l,a,f){let d=t.length,p=u.length,h=d;const $={};for(;h--;)$[t[h].key]=h;const y=[],g=new Map,m=new Map;for(h=p;h--;){const t=f(i,u,h),s=e(t);let c=r.get(s);c?o&&c.p(t,n):(c=l(s,t),c.c()),g.set(s,y[h]=c),s in $&&m.set(s,Math.abs(h-$[s]))}const b=new Set,v=new Set;function w(t){M(t,1),t.m(s,a),r.set(t.key,t),a=t.first,p--}for(;d&&p;){const n=y[p-1],e=t[d-1],o=n.key,i=e.key;n===e?(a=n.first,d--,p--):g.has(i)?!r.has(o)||b.has(o)?w(n):v.has(i)?d--:m.get(o)>m.get(i)?(v.add(o),w(n)):(b.add(i),d--):(c(e,r),d--)}for(;d--;){const n=t[d];g.has(n.key)||c(n,r)}for(;p;)w(y[p-1]);return y}(o,n,r,1,t,u,i,e,O,F,null,V))},i:t,o:t,d(t){t&&l(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function H(t,n,e){let{videos:o}=n;return t.$$set=t=>{"videos"in t&&e(0,o=t.videos)},[o]}class J extends q{constructor(t){super(),N(this,t,H,G,u,{videos:0})}}function Q(t){let n,e,o,i,u,r=t[0].totalResults+"";return i=new J({props:{videos:t[0].videos}}),{c(){n=a("p"),e=f(r),o=d(),R(i.$$.fragment)},m(t,r){c(t,n,r),s(n,e),c(t,o,r),C(i,t,r),u=!0},p(t,[n]){(!u||1&n)&&r!==(r=t[0].totalResults+"")&&$(e,r);const o={};1&n&&(o.videos=t[0].videos),i.$set(o)},i(t){u||(M(i.$$.fragment,t),u=!0)},o(t){j(i.$$.fragment,t),u=!1},d(t){t&&l(n),t&&l(o),I(i,t)}}}function W(t,n,e){let o;return r(t,B,(t=>e(0,o=t))),[o]}class X extends q{constructor(t){super(),N(this,t,W,Q,u,{})}}function Y(t){let n,e,o,i,u;return e=new U({props:{endpoint:t[0],key:t[1]}}),i=new X({}),{c(){n=a("main"),R(e.$$.fragment),o=d(),R(i.$$.fragment)},m(t,r){c(t,n,r),C(e,n,null),s(n,o),C(i,n,null),u=!0},p(t,[n]){const o={};1&n&&(o.endpoint=t[0]),2&n&&(o.key=t[1]),e.$set(o)},i(t){u||(M(e.$$.fragment,t),M(i.$$.fragment,t),u=!0)},o(t){j(e.$$.fragment,t),j(i.$$.fragment,t),u=!1},d(t){t&&l(n),I(e),I(i)}}}function tt(t,n,e){let{youtubeDataApiEndpoint:o}=n,{youtubeDataApiKey:i}=n;return console.log("youtubeDataApiEndpoint: ",o),console.log("youtubeDataApiKey: ",i),t.$$set=t=>{"youtubeDataApiEndpoint"in t&&e(0,o=t.youtubeDataApiEndpoint),"youtubeDataApiKey"in t&&e(1,i=t.youtubeDataApiKey)},[o,i]}return new class extends q{constructor(t){super(),N(this,t,tt,Y,u,{youtubeDataApiEndpoint:0,youtubeDataApiKey:1})}}({target:document.body,props:{youtubeDataApiEndpoint:"https://www.googleapis.com/youtube/v3/search",youtubeDataApiKey:"AIzaSyAoVZET2gvLjZKBb4dksv6SzdU7SbOtMpw"}})}();
//# sourceMappingURL=bundle.js.map
